(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/category/search"],{"1cbc":function(t,n,o){"use strict";var a=o("38b8"),e=o.n(a);e.a},"26a2":function(t,n,o){"use strict";o.r(n);var a=o("4083"),e=o.n(a);for(var i in a)"default"!==i&&function(t){o.d(n,t,function(){return a[t]})}(i);n["default"]=e.a},"2c37":function(t,n,o){"use strict";var a=function(){var t=this,n=t.$createElement;t._self._c},e=[];o.d(n,"a",function(){return a}),o.d(n,"b",function(){return e})},"38b8":function(t,n,o){},4083:function(t,n,o){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e(o("a34a"));function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n,o,a,e,i,r){try{var c=t[i](r),s=c.value}catch(u){return void o(u)}c.done?n(s):Promise.resolve(s).then(a,e)}function r(t){return function(){var n=this,o=arguments;return new Promise(function(a,e){var r=t.apply(n,o);function c(t){i(r,a,e,c,s,"next",t)}function s(t){i(r,a,e,c,s,"throw",t)}c(void 0)})}}var c=function(){return o.e("components/min-badge/min-badge").then(o.bind(null,"c93a"))},s={components:{minBadge:c},data:function(){return{txtSearch:"",userInfoCount:0,sizeCalcState:!1,tabScrollTop:0,tabScrollLeft:0,flist:[],slist:[],tlist:[],fatherlist:[],currentId:0,childshow:!1,current_f_id:1,goodslist:[],c_currentid:"",page:1,size:10,loading:!0,levl:0,keyword:""}},onLoad:function(){this.loadData(),this.getInfoCount()},onReachBottom:function(){this.loadData()},methods:{getInfoCount:function(){var t=this;t.$http({method:"GET",url:this.global.target+"/wx/user/userinfopubscount"}).then(function(n){t.userInfoCount=n.data.data},function(t){})},loadData:function(){var n=r(a.default.mark(function n(){var o,e,i,r;return a.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:o=this.loading,1==o&&(""==this.keyword&&(this.keyword=this.$route.query.keyword,this.txtSearch=this.keyword),e=this,i=e.page,r=e.size,e.$http({method:"POST",params:{keyword:e.keyword,page:i,size:r,sort:"add_time"},url:e.global.target+"/wx/goods/search"}).then(function(n){var o=n.data.data.totals;0==o&&e.$api.msg("无数据"),o<r&&(e.loading=!1);var a=n.data.data.goodslist;console.log(n),a.forEach(function(t){e.goodslist.push(t)}),e.page++,t.hideLoading()},function(t){}));case 2:case"end":return n.stop()}},n,this)}));function o(){return n.apply(this,arguments)}return o}(),asideScroll:function(t){this.sizeCalcState||this.calcSize();var n=t.detail.scrollTop,o=this.slist.filter(function(t){return t.top<=n}).reverse();o.length>0&&(this.currentId=o[0].pid)},calcSize:function(){var n=0;this.slist.forEach(function(o){var a=t.createSelectorQuery().select("#main-"+o.id);a.fields({size:!0},function(t){o.top=n,n+=t.height,o.bottom=n}).exec()}),this.sizeCalcState=!0},navToList:function(n,o){t.navigateTo({url:"/pages/product/list?fid=".concat(this.currentId,"&sid=").concat(n,"&tid=").concat(o)})},change_currentid:function(t){this.currentId=t,this.loading=!0,this.page=1,this.levl=1,this.getGoodslist(1)},childshow_btn:function(){this.childshow=!this.childshow},navToDetailPage:function(n){var o=n.id;t.navigateTo({url:"/pages/product/product?id=".concat(o)})},navTo:function(n){t.navigateTo({url:n})},navToSearch:function(){this.loading=!0;var n=this.txtSearch;this.keyword=n;var o=this,a=1,e=o.size;o.$http({method:"POST",params:{keyword:n,page:a,size:e,sort:"add_time"},url:o.global.target+"/wx/goods/search"}).then(function(n){var a=n.data.data.totals;0==a&&o.$api.msg("无数据"),a<e&&(o.loading=!1);var i=n.data.data.goodslist;console.log(n),o.goodslist=i,o.page=2,t.hideLoading()},function(t){})}}};n.default=s}).call(this,o("543d")["default"])},"75a1":function(t,n,o){"use strict";o.r(n);var a=o("2c37"),e=o("26a2");for(var i in e)"default"!==i&&function(t){o.d(n,t,function(){return e[t]})}(i);o("1cbc");var r=o("2877"),c=Object(r["a"])(e["default"],a["a"],a["b"],!1,null,null,null);n["default"]=c.exports}},[["3cc8","common/runtime","common/vendor"]]]);